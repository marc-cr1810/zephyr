# Finally Block Test to Debug Issues

print("Testing finally blocks...")

# Test 1: Finally block with no exception
print("Test 1: Finally block with no exception")
try {
    print("In try block - no exception")
} catch (e) {
    print("This should not be reached")
} finally {
    print("Finally block executed - no exception case")
}

print()

# Test 2: Finally block with caught exception
print("Test 2: Finally block with caught exception")
try {
    print("In try block - throwing exception")
    throw RuntimeError("Test exception")
} catch (e) {
    print("In catch block:", e.message)
} finally {
    print("Finally block executed - exception caught case")
}

print()

# Test 3: Finally block without catch
print("Test 3: Finally block without catch")
try {
    print("In try block - no catch block present")
} finally {
    print("Finally block executed - no catch case")
}

print()

# Test 4: Finally block with function return
print("Test 4: Finally block with function return")
func test_finally_with_return(should_throw) {
    try {
        print("In function try block")
        if should_throw {
            throw RuntimeError("Function exception")
        }
        print("About to return from try")
        return "success"
    } catch (e) {
        print("In function catch:", e.message)
        return "caught"
    } finally {
        print("Function finally block executed")
    }
}

result1 = test_finally_with_return(false)
print("Result 1:", result1)

result2 = test_finally_with_return(true)
print("Result 2:", result2)

print()

# Test 5: Nested try-finally
print("Test 5: Nested try-finally")
try {
    print("Outer try block")
    try {
        print("Inner try block")
        throw ValueError("Inner exception")
    } finally {
        print("Inner finally block")
    }
} catch (e) {
    print("Outer catch:", e.message)
} finally {
    print("Outer finally block")
}

print("Test completed.")
